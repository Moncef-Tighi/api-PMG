"use strict";var express=require("express"),morgan=require("morgan"),db=require("./lib/db"),config=require("./config/config"),jwt=require("./middlware/jwt"),_require=require("./middlware/user"),userMiddlware=_require.userMiddlware,_require2=require("./middlware/errorHandler"),errorHandler=_require2.errorHandler,NotFoundError=_require2.NotFoundError,UnauthorizedError=_require2.UnauthorizedError,routesV1=require("./config/routes");require("express-async-errors"),require("./lib/morgan.decoded");var app=express();app.use(morgan("decoded")),app.use(express.json()),app.use(express.urlencoded({extended:!1})),app.use(jwt.verify),app.use(userMiddlware),app.use(jwt.next),config.delay&&app.use(function(d,a,b){setTimeout(function(){return b()},config.delay)}),app.use("/api/v1",routesV1),app.use("/api",function(d,a,b){b(new NotFoundError)}),app.use("/",function(d,a){var b="".concat(__dirname,"/bin/SalesAdvisor.apk");a.download(b)}),app.use(errorHandler),module.exports=app;