"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),bcrypt=require("bcrypt"),_require=require("../../lib/db"),remoteDb=_require.remoteDb,_require2=require("../../lib/db"),localDb=_require2.localDb,_require3=require("../../enums/accountType"),accountType=_require3.accountType,password=bcrypt.hashSync("password",3),importUsers=function(){var b=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function e(){var f,g,h;return _regenerator["default"].wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return f=[],b.next=3,remoteDb("dbo.COMMERCIAL");case 3:return g=b.sent,f.push.apply(f,(0,_toConsumableArray2["default"])(g.map(function(b){return{cegidId:b.GCL_COMMERCIAL,username:b.GCL_LIBELLE,password:password,accountType:accountType.SellerAccount,accessStores:[b.GCL_ETABLISSEMENT],activeUntil:null,disabled:!1}}))),b.next=7,remoteDb("UTILISAT");case 7:return h=b.sent,f.push.apply(f,(0,_toConsumableArray2["default"])(h.map(function(b){return{cegidId:b.US_UTILISATEUR,username:b.US_ABREGE,password:password,accountType:accountType.UserAccount,accessStores:[b.US_ETABLISSEMENT],activeUntil:null,disabled:!1}}))),b.next=11,localDb("users").del();case 11:return b.next=13,localDb.batchInsert("users",f,10);case 13:return b.abrupt("return",f.length);case 14:case"end":return b.stop();}},e)}));return function(){return b.apply(this,arguments)}}();importUsers().then(function(b){console.log("Imported (".concat(b,") users")),localDb.destroy(),remoteDb.destroy()});